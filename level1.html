<!DOCTYPE html>
<html>
<head>
<title>Level 1 - Reflected XSS</title>
<meta charset="UTF-8">
<style>
body { background:#0d0d0d; color:#00e8ff; font-family:Consolas; text-align:center; padding-top:60px; }
input, button { padding:8px; background:#111; border:1px solid #00e8ff; color:#00e8ff; }
button { cursor:pointer; font-weight:bold; }
.box { width:60%; min-width:300px; display:inline-block; background:#111; border:1px solid #00e8ff; padding:20px; border-radius:6px; }
.hint { margin-top:10px; opacity:0.8; }
</style>
</head>
<body>

<h1>Level 1 â€” Reflected XSS</h1>

<div class="box">
  <p><b>Riddle:</b> I only shout when wrapped in tags,<br>
  Inside I hold a tiny brag.<br>
  Make me pop with quotes and script,<br>
  Then to the next level you will skip.</p><br>

  <form method="GET">
    <input type="text" name="x" style="width:260px;">
    <button type="submit">Run</button>
  </form>

  <p id="hint" class="hint"></p>
</div>

<script>
var params = new URLSearchParams(window.location.search);
var x = params.get("x");

// Load failures
var fails = parseInt(localStorage.getItem("lvl1fails") || "0");

if (x) {
  if (x.indexOf('<script>alert("') === 0 && x.lastIndexOf('")<\/script>') === x.length - 11) {
    localStorage.removeItem("lvl1fails");
    var msg = x.substring(15, x.length - 11);
    alert(msg);
    setTimeout(function(){ window.location.href = "level2.html"; }, 800);
  } else {
    fails++;
    localStorage.setItem("lvl1fails", fails.toString());
  }
}

if (fails >= 3) {
  document.getElementById("hint").innerText = 'HINT: Use script tag with alert()';
}
</script>

</body>
</html>
